{"version":3,"file":"admin-feedback.js","mappings":"qBAUAA,EAAOC,QAVP,SAA2BC,EAAKC,IACnB,MAAPA,GAAeA,EAAMD,EAAIE,UAAQD,EAAMD,EAAIE,QAE/C,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIC,MAAMJ,GAAME,EAAIF,EAAKE,IAC9CC,EAAKD,GAAKH,EAAIG,GAGhB,OAAOC,I,QCHTN,EAAOC,QAJP,SAAyBC,GACvB,GAAIK,MAAMC,QAAQN,GAAM,OAAOA,I,QCDjC,SAASO,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAwBvCd,EAAOC,QApBP,SAA2BsB,GACzB,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIN,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GAEzB,SAASb,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOe,GACdpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,GAGnEhB,OAAMiB,S,QCzBZ9B,EAAOC,QANP,SAAgC8B,GAC9B,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,K,QCyBf/B,EAAOC,QA3BP,SAA+BC,EAAKG,GAClC,GAAsB,oBAAX4B,QAA4BA,OAAOC,YAAYC,OAAOjC,GAAjE,CACA,IAAIkC,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKT,EAET,IACE,IAAK,IAAiCU,EAA7BC,EAAKvC,EAAI+B,OAAOC,cAAmBG,GAAMG,EAAKC,EAAGC,QAAQtB,QAChEgB,EAAKO,KAAKH,EAAGtB,QAETb,GAAK+B,EAAKhC,SAAWC,GAH8CgC,GAAK,IAK9E,MAAOR,GACPS,GAAK,EACLC,EAAKV,EACL,QACA,IACOQ,GAAsB,MAAhBI,EAAW,QAAWA,EAAW,SAC5C,QACA,GAAIH,EAAI,MAAMC,GAIlB,OAAOH,K,QCpBTpC,EAAOC,QAJP,WACE,MAAM,IAAI2C,UAAU,+I,aCDtB,IAAIC,EAAiB,EAAQ,KAEzBC,EAAuB,EAAQ,KAE/BC,EAA6B,EAAQ,KAErCC,EAAkB,EAAQ,KAM9BhD,EAAOC,QAJP,SAAwBC,EAAKG,GAC3B,OAAOwC,EAAe3C,IAAQ4C,EAAqB5C,EAAKG,IAAM0C,EAA2B7C,EAAKG,IAAM2C,M,cCTtG,IAAIC,EAAmB,EAAQ,KAW/BjD,EAAOC,QATP,SAAqCiD,EAAGC,GACtC,GAAKD,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAOD,EAAiBC,EAAGC,GACtD,IAAIC,EAAIjB,OAAOkB,UAAUC,SAASC,KAAKL,GAAGM,MAAM,GAAI,GAEpD,MADU,WAANJ,GAAkBF,EAAEO,cAAaL,EAAIF,EAAEO,YAAYC,MAC7C,QAANN,GAAqB,QAANA,EAAoB7C,MAAMoD,KAAKT,GACxC,cAANE,GAAqB,2CAA2CQ,KAAKR,GAAWH,EAAiBC,EAAGC,QAAxG,K,qBCRFnD,EAAOC,QAAU4D,OAA2B,oB,qBCA5C7D,EAAOC,QAAU4D,OAAW,GAAY,U,qBCAxC7D,EAAOC,QAAU4D,OAAW,GAAc,Y,qBCA1C7D,EAAOC,QAAU4D,OAAW,GAAW,UCCnCC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBlC,IAAjBmC,EACH,OAAOA,EAAahE,QAGrB,IAAID,EAAS8D,EAAyBE,GAAY,CAGjD/D,QAAS,IAOV,OAHAiE,EAAoBF,GAAUhE,EAAQA,EAAOC,QAAS8D,GAG/C/D,EAAOC,Q,+DCrBf,SACA,SACA,YAEA4D,OAAOM,iBAAiB,QAAQ,WAAM,MAC5BC,EAAMC,SAASC,cAAc,OACnCF,EAAIG,GAAK,aACT,UAAAF,SAASG,eAAe,iBAAxB,SAAmCC,OAAOL,GAC1C,IAAMM,EAAKL,SAASG,eAAe,kCACnC,IAAAG,QAAO,gBAACC,EAAD,CAAKF,GAAIA,IAAOL,SAASG,eAAe,kBAGnD,IAAMI,EAAM,SAAC,GAAS,IAARF,EAAQ,EAARA,GAAQ,GACM,IAAAG,WAAS,GADf,qBACXC,EADW,KACLC,EADK,KAEZC,GAAY,IAAAC,cAAY,SAACC,GAC3BA,EAAEC,iBACFJ,GAAQ,KACT,IAUH,OATA,IAAAK,YAAU,WAEN,OADAV,EAAGP,iBAAiB,QAASa,GACtB,kBAAMN,EAAGW,oBAAoB,QAASL,MAC9C,CAACA,IAMG,gBAACM,EAAD,CAAeC,OALP,WACXb,EAAGW,oBAAoB,QAASL,GAChCN,EAAGc,QACHT,GAAQ,IAE0BU,eAAgBf,EAAGgB,KAAMZ,KAAMA,EAAMC,QAASA,EAASY,KAAMC,wBAGjGN,EAAgB,SAAC,GAAkD,IAAjDG,EAAiD,EAAjDA,eAAgBX,EAAiC,EAAjCA,KAAMC,EAA2B,EAA3BA,QAASY,EAAkB,EAAlBA,KAAMJ,EAAY,EAAZA,OAAY,GACjC,IAAAV,WAAS,GADwB,qBAC9DgB,EAD8D,KAClDC,EADkD,QAEjC,IAAAjB,UAAS,IAFwB,qBAE9DkB,EAF8D,KAElDC,EAFkD,QAGjC,IAAAnB,YAHiC,qBAG9DoB,EAH8D,KAGlDC,EAHkD,QAI/B,IAAArB,UAAS,IAJsB,qBAI9DsB,EAJ8D,KAIjDC,EAJiD,KAK/DC,EAAU,kBAAMtB,GAAQ,IACxBuB,EAAUnE,OAAOoE,KAAKZ,EAAKW,SAASE,KAAI,SAAAjC,GAAE,MAAK,CACjDkC,MAAOd,EAAKW,QAAQ/B,GACpBrD,MAAOqD,MAELmC,EAAQ,+CAAG,2FACbR,GAAc,GADD,mBAGH,aAAS,CACXS,OAAQ,OACRC,IAAKjB,EAAKkB,MACVlB,KAAM,CACFmB,YAAajB,EACbkB,YAAahB,KARZ,6EAcTG,GAAc,GACdX,IAfS,0EAAH,sDAmBd,IAAAH,YAAU,WACFO,EAAKqB,aAAaC,eAAepB,GACjCO,EAAeT,EAAKqB,aAAanB,IAEjCO,EAAe,MAEpB,CAACP,IAEJ,IAAMqB,EAAQ,CACVC,MAAOxB,EAAKwB,MACZC,eAAe,EACfC,cAAc,EACdC,cAAc,EACdC,eAAgBlB,GAEpB,OAAIvB,EAEI,gBAAC,EAAA0C,MAAUN,EACP,uBAAKO,UAAU,wBACX,yBAAI9B,EAAK+B,aACT,uBAAKD,UAAU,qBACX,gBAAC,EAAAE,aAAD,CAAcC,SAAU/B,EAAYS,QAASA,EAASuB,SAAU/B,KAEpE,uBAAK2B,UAAU,6BACX,gBAAC,EAAAK,gBAAD,CAAiB3B,YAAaA,EAAaM,MAAOd,EAAKoC,gBAAiB7G,MAAO6E,EAAY8B,SAAU7B,MAG7G,uBAAKyB,UAAU,wBACX,gBAAC,EAAAO,OAAD,CAAQC,QAAQ,UAAUC,QAASxB,EAAUyB,OAAQlC,EAAYmC,SAAUnC,GAAaN,EAAK0C,QAAQC,SACrG,gBAAC,EAAAN,OAAD,CAAQtC,KAAMD,EAAgBgC,UAAU,yBAAyBQ,QAAQ,WAAWC,QAAS7B,GAAUV,EAAK0C,QAAQE,aAK7H,O","sources":["webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://woo-stripe-payment/external window \"regeneratorRuntime\"","webpack://woo-stripe-payment/external window [\"wp\",\"apiFetch\"]","webpack://woo-stripe-payment/external window [\"wp\",\"components\"]","webpack://woo-stripe-payment/external window [\"wp\",\"element\"]","webpack://woo-stripe-payment/webpack/bootstrap","webpack://woo-stripe-payment/./assets/js/admin/feedback.js"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","module.exports = window[\"regeneratorRuntime\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import {useState, useCallback, useEffect, render} from '@wordpress/element';\r\nimport {Modal, Button, RadioControl, TextareaControl} from '@wordpress/components';\r\nimport apiFetch from '@wordpress/api-fetch';\r\n\r\nwindow.addEventListener('load', () => {\r\n    const app = document.createElement('div');\r\n    app.id = 'stripe-app';\r\n    document.getElementById('wpbody')?.append(app);\r\n    const el = document.getElementById('deactivate-woo-stripe-payment');\r\n    render(<App el={el}/>, document.getElementById('stripe-app'));\r\n});\r\n\r\nconst App = ({el}) => {\r\n    const [open, setOpen] = useState(false);\r\n    const openModal = useCallback((e) => {\r\n        e.preventDefault();\r\n        setOpen(true)\r\n    }, []);\r\n    useEffect(() => {\r\n        el.addEventListener('click', openModal);\r\n        return () => el.removeEventListener('click', openModal);\r\n    }, [openModal]);\r\n    const submit = () => {\r\n        el.removeEventListener('click', openModal);\r\n        el.click();\r\n        setOpen(false);\r\n    }\r\n    return <FeedbackModal submit={submit} deactivateLink={el.href} open={open} setOpen={setOpen} data={stripeFeedbackParams}/>\r\n}\r\n\r\nconst FeedbackModal = ({deactivateLink, open, setOpen, data, submit}) => {\r\n    const [reasonCode, setReasonCode] = useState(false);\r\n    const [reasonText, setReasonText] = useState('');\r\n    const [processing, setProcessing] = useState();\r\n    const [placeholder, setPlaceHolder] = useState('');\r\n    const onClose = () => setOpen(false);\r\n    const options = Object.keys(data.options).map(id => ({\r\n        label: data.options[id],\r\n        value: id\r\n    }));\r\n    const onSubmit = async () => {\r\n        setProcessing(true);\r\n        try {\r\n            await apiFetch({\r\n                method: 'POST',\r\n                url: data.route,\r\n                data: {\r\n                    reason_code: reasonCode,\r\n                    reason_text: reasonText\r\n                }\r\n            })\r\n        } catch (error) {\r\n\r\n        } finally {\r\n            setProcessing(false);\r\n            submit();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (data.placeholders.hasOwnProperty(reasonCode)) {\r\n            setPlaceHolder(data.placeholders[reasonCode]);\r\n        } else {\r\n            setPlaceHolder('');\r\n        }\r\n    }, [reasonCode]);\r\n\r\n    const props = {\r\n        title: data.title,\r\n        isDismissible: true,\r\n        focusOnMount: true,\r\n        isFullScreen: false,\r\n        onRequestClose: onClose\r\n    }\r\n    if (open) {\r\n        return (\r\n            <Modal {...props}>\r\n                <div className='stripe-modal-content'>\r\n                    <p>{data.description}</p>\r\n                    <div className='options-container'>\r\n                        <RadioControl selected={reasonCode} options={options} onChange={setReasonCode}/>\r\n                    </div>\r\n                    <div className='stripe-deactivation__text'>\r\n                        <TextareaControl placeholder={placeholder} label={data.reasonTextLabel} value={reasonText} onChange={setReasonText}/>\r\n                    </div>\r\n                </div>\r\n                <div className='stripe-modal-actions'>\r\n                    <Button variant='primary' onClick={onSubmit} isBusy={processing} disabled={processing}>{data.buttons.primary}</Button>\r\n                    <Button href={deactivateLink} className='stripe-skip-deactivate' variant='tertiary' onClick={onClose}>{data.buttons.secondary}</Button>\r\n                </div>\r\n            </Modal>\r\n        )\r\n    }\r\n    return null;\r\n}"],"names":["module","exports","arr","len","length","i","arr2","Array","isArray","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","obj","__esModule","Symbol","iterator","Object","_arr","_n","_d","_e","_s","_i","next","push","TypeError","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arrayLikeToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","addEventListener","app","document","createElement","id","getElementById","append","el","render","App","useState","open","setOpen","openModal","useCallback","e","preventDefault","useEffect","removeEventListener","FeedbackModal","submit","click","deactivateLink","href","data","stripeFeedbackParams","reasonCode","setReasonCode","reasonText","setReasonText","processing","setProcessing","placeholder","setPlaceHolder","onClose","options","keys","map","label","onSubmit","method","url","route","reason_code","reason_text","placeholders","hasOwnProperty","props","title","isDismissible","focusOnMount","isFullScreen","onRequestClose","Modal","className","description","RadioControl","selected","onChange","TextareaControl","reasonTextLabel","Button","variant","onClick","isBusy","disabled","buttons","primary","secondary"],"sourceRoot":""}